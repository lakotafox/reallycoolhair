const galleryData = [
    {
        "folder": "New Folder With Items 1",
        "preview": "3607202886562094080_35453207717_1.jpg",
        "images": [
                "3607202886562094080_35453207717_1.jpg",
                "3607202886562094080_35453207717_2.jpg",
                "3607202886562094080_35453207717_3.jpg",
                "3607202886562094080_35453207717_4.jpg",
                "3607202886562094080_35453207717_5.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 2",
        "preview": "3612263822268437257_35453207717_1.jpg",
        "images": [
                "3612263822268437257_35453207717_1.jpg",
                "3612263822268437257_35453207717_10.jpg",
                "3612263822268437257_35453207717_2.jpg",
                "3612263822268437257_35453207717_3.jpg",
                "3612263822268437257_35453207717_4.jpg",
                "3612263822268437257_35453207717_5.jpg",
                "3612263822268437257_35453207717_6.jpg",
                "3612263822268437257_35453207717_7.jpg",
                "3612263822268437257_35453207717_8.jpg",
                "3612263822268437257_35453207717_9.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 3",
        "preview": "3623117005832118356_35453207717_1.jpg",
        "images": [
                "3623117005832118356_35453207717_1.jpg",
                "3623117005832118356_35453207717_2.jpg",
                "3623117005832118356_35453207717_3.jpg",
                "3623117005832118356_35453207717_4.jpg",
                "3623117005832118356_35453207717_5.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 4",
        "preview": "3624054999415606478_35453207717_1.jpg",
        "images": [
                "3624054999415606478_35453207717_1.jpg",
                "3624054999415606478_35453207717_2.jpg",
                "3624054999415606478_35453207717_3.jpg",
                "3624054999415606478_35453207717_4.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 5",
        "preview": "3628174104723068122_35453207717_1.jpg",
        "images": [
                "3628174104723068122_35453207717_1.jpg",
                "3628174104723068122_35453207717_2.jpg",
                "3628174104723068122_35453207717_3.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 6",
        "preview": "3720273813512046058_35453207717_1.jpg",
        "images": [
                "3720273813512046058_35453207717_1.jpg",
                "3720273813512046058_35453207717_2.jpg",
                "3720273813512046058_35453207717_3.jpg",
                "3720273813512046058_35453207717_4.jpg",
                "3720273813512046058_35453207717_5.jpg",
                "3720273813512046058_35453207717_6.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 7",
        "preview": "3717313547458383539_35453207717_1.jpg",
        "images": [
                "3717313547458383539_35453207717_1.jpg",
                "3717313547458383539_35453207717_2.jpg",
                "3717313547458383539_35453207717_3.jpg",
                "3717313547458383539_35453207717_4.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 8",
        "preview": "3629017914147519987_35453207717_1.jpg",
        "images": [
                "3629017914147519987_35453207717_1.jpg",
                "3629017914147519987_35453207717_2.jpg",
                "3629017914147519987_35453207717_3.jpg",
                "3629017914147519987_35453207717_4.jpg",
                "3629017914147519987_35453207717_5.jpg",
                "3629017914147519987_35453207717_6.jpg",
                "3629017914147519987_35453207717_7.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 9",
        "preview": "3629808237444100813_35453207717_1.jpg",
        "images": [
                "3629808237444100813_35453207717_1.jpg",
                "3629808237444100813_35453207717_2.jpg",
                "3629808237444100813_35453207717_3.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 10",
        "preview": "3633274654640965023_35453207717_1.jpg",
        "images": [
                "3633274654640965023_35453207717_1.jpg",
                "3633274654640965023_35453207717_2.jpg",
                "3633274654640965023_35453207717_3.jpg",
                "3633274654640965023_35453207717_4.jpg",
                "3633274654640965023_35453207717_5.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 11",
        "preview": "3636358659336135436_35453207717_1.jpg",
        "images": [
                "3636358659336135436_35453207717_1.jpg",
                "3636358659336135436_35453207717_2.jpg",
                "3636358659336135436_35453207717_3.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 12",
        "preview": "3637014823999102929_35453207717_1.jpg",
        "images": [
                "3637014823999102929_35453207717_1.jpg",
                "3637014823999102929_35453207717_2.jpg",
                "3637014823999102929_35453207717_3.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 13",
        "preview": "3638284122101361854_35453207717_1.jpg",
        "images": [
                "3638284122101361854_35453207717_1.jpg",
                "3638284122101361854_35453207717_2.jpg",
                "3638284122101361854_35453207717_3.jpg",
                "3638284122101361854_35453207717_4.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 14",
        "preview": "3639043431592434022_35453207717_1.jpg",
        "images": [
                "3639043431592434022_35453207717_1.jpg",
                "3639043431592434022_35453207717_2.jpg",
                "3639043431592434022_35453207717_3.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 15",
        "preview": "3642836107202130144_35453207717_1.jpg",
        "images": [
                "3642836107202130144_35453207717_1.jpg",
                "3642836107202130144_35453207717_2.jpg",
                "3642836107202130144_35453207717_3.jpg",
                "3642836107202130144_35453207717_4.jpg",
                "3642836107202130144_35453207717_5.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 16",
        "preview": "3643521147641427632_35453207717_1.jpg",
        "images": [
                "3643521147641427632_35453207717_1.jpg",
                "3643521147641427632_35453207717_2.jpg",
                "3643521147641427632_35453207717_3.jpg",
                "3643521147641427632_35453207717_4.jpg",
                "3643521147641427632_35453207717_5.jpg",
                "3643521147641427632_35453207717_6.jpg",
                "3643521147641427632_35453207717_7.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 17",
        "preview": "3647958955894185514_35453207717_1.jpg",
        "images": [
                "3647958955894185514_35453207717_1.jpg",
                "3647958955894185514_35453207717_2.jpg",
                "3647958955894185514_35453207717_3.jpg",
                "3647958955894185514_35453207717_4.jpg",
                "3647958955894185514_35453207717_5.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 18",
        "preview": "3648456385853389235_35453207717_1.jpg",
        "images": [
                "3648456385853389235_35453207717_1.jpg",
                "3648456385853389235_35453207717_2.jpg",
                "3648456385853389235_35453207717_3.jpg",
                "3648456385853389235_35453207717_4.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 19",
        "preview": "3655837328238839467_35453207717_1.jpg",
        "images": [
                "3655837328238839467_35453207717_1.jpg",
                "3655837328238839467_35453207717_2.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 20",
        "preview": "3656498211659405973_35453207717_1.jpg",
        "images": [
                "3656498211659405973_35453207717_1.jpg",
                "3656498211659405973_35453207717_2.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 21",
        "preview": "3659581214378534918_35453207717_1.jpg",
        "images": [
                "3659581214378534918_35453207717_1.jpg",
                "3659581214378534918_35453207717_2.jpg",
                "3659581214378534918_35453207717_3.jpg",
                "3659581214378534918_35453207717_4.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 22",
        "preview": "3671771016285765874_35453207717_1.jpg",
        "images": [
                "3671771016285765874_35453207717_1.jpg",
                "3671771016285765874_35453207717_2.jpg",
                "3671771016285765874_35453207717_3.jpg",
                "3671771016285765874_35453207717_4.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 23",
        "preview": "3675993705003102412_35453207717_1.jpg",
        "images": [
                "3675993705003102412_35453207717_1.jpg",
                "3675993705003102412_35453207717_2.jpg",
                "3675993705003102412_35453207717_3.jpg",
                "3675993705003102412_35453207717_4.jpg",
                "3675993705003102412_35453207717_5.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 24",
        "preview": "3678144506621608006_35453207717_1.jpg",
        "images": [
                "3678144506621608006_35453207717_1.jpg",
                "3678144506621608006_35453207717_2.jpg",
                "3678144506621608006_35453207717_3.jpg",
                "3678144506621608006_35453207717_4.jpg",
                "3678144506621608006_35453207717_5.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 25",
        "preview": "3683321124320271010_35453207717_1.jpg",
        "images": [
                "3683321124320271010_35453207717_1.jpg",
                "3683321124320271010_35453207717_2.jpg",
                "3683321124320271010_35453207717_3.jpg",
                "3683321124320271010_35453207717_4.jpg",
                "3691258297132610267_35453207717_1.jpg",
                "3691258297132610267_35453207717_2.jpg",
                "3691258297132610267_35453207717_3.jpg",
                "3691258297132610267_35453207717_4.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 26",
        "preview": "3706389195604790966_35453207717_1.jpg",
        "images": [
                "3706389195604790966_35453207717_1.jpg",
                "3706389195604790966_35453207717_2.jpg",
                "3706389195604790966_35453207717_3.jpg",
                "3706389195604790966_35453207717_4.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 27",
        "preview": "3693571677615258016_35453207717_1.jpg",
        "images": [
                "3693571677615258016_35453207717_1.jpg",
                "3693571677615258016_35453207717_2.jpg",
                "3693571677615258016_35453207717_3.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 28",
        "preview": "3703662082890886212_35453207717_1.jpg",
        "images": [
                "3703662082890886212_35453207717_1.jpg",
                "3703662082890886212_35453207717_2.jpg",
                "3703662082890886212_35453207717_3.jpg",
                "3703662082890886212_35453207717_4.jpg"
        ]
    },
    {
        "folder": "New Folder With Items 29",
        "preview": "3622440409483875048_35453207717_1.jpg",
        "images": [
                "3622440409483875048_35453207717_1.jpg",
                "3622440409483875048_35453207717_2.jpg",
                "3622440409483875048_35453207717_3.jpg",
                "3622440409483875048_35453207717_4.jpg",
                "3622440409483875048_35453207717_5.jpg"
        ]
    }
];

document.addEventListener('DOMContentLoaded', function() {
    const galleryGrid = document.getElementById('gallery-grid');
    const modal = document.getElementById('gallery-modal');
    const modalGallery = document.getElementById('modal-gallery');
    const modalTitle = document.getElementById('modal-title');
    const modalClose = document.querySelector('.modal-close');
    const lightbox = document.getElementById('image-lightbox');
    const lightboxImage = document.getElementById('lightbox-image');
    const lightboxClose = document.querySelector('.lightbox-close');

    galleryData.forEach((client, index) => {
        const galleryItem = document.createElement('div');
        galleryItem.className = 'gallery-item';
        galleryItem.dataset.index = index;

        const img = document.createElement('img');
        img.src = `rlycoolhair_pics/${client.folder}/${client.preview}`;
        img.alt = `Client ${index + 1} Hair Style`;

        galleryItem.appendChild(img);
        galleryGrid.appendChild(galleryItem);

        galleryItem.addEventListener('click', function() {
            openModal(index);
        });
    });

    let savedScrollPosition = 0;

    function openModal(index) {
        // Save current scroll position
        savedScrollPosition = window.scrollY || window.pageYOffset;

        // Create fake scrollbar for modal on mobile
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        if (isMobile) {
            const modalScrollbar = document.createElement('div');
            modalScrollbar.id = 'modal-fake-scrollbar';
            modalScrollbar.innerHTML = `
                <div style="
                    position: fixed;
                    right: 0;
                    top: 0;
                    width: 17px;
                    height: 100%;
                    background: #c0c0c0;
                    border-left: 1px solid #808080;
                    z-index: 1000001;
                ">
                    <div id="modal-fake-thumb" style="
                        position: absolute;
                        width: 15px;
                        height: 60px;
                        left: 1px;
                        background: linear-gradient(to bottom, #ffffff, #c0c0c0, #808080);
                        border: 1px solid #808080;
                        box-shadow: inset 1px 1px 0 #dfdfdf;
                        top: 0;
                    "></div>
                </div>
            `;
            document.body.appendChild(modalScrollbar);

            // Update modal scrollbar on scroll
            const updateModalScrollbar = function() {
                // The modal itself is what scrolls, not modal-content
                const modalEl = document.getElementById('gallery-modal');
                if (modalEl) {
                    const scrollHeight = modalEl.scrollHeight - modalEl.clientHeight;
                    const scrollPercent = scrollHeight > 0 ? modalEl.scrollTop / scrollHeight : 0;
                    const trackHeight = window.innerHeight;
                    const thumbHeight = 60;
                    const maxTop = trackHeight - thumbHeight;
                    const thumb = document.getElementById('modal-fake-thumb');
                    if (thumb) {
                        thumb.style.top = Math.max(0, Math.min(maxTop, scrollPercent * maxTop)) + 'px';
                    }
                }
            };

            // Listen to modal scroll
            setTimeout(function() {
                const modalEl = document.getElementById('gallery-modal');
                if (modalEl) {
                    modalEl.addEventListener('scroll', updateModalScrollbar);
                    updateModalScrollbar();
                }
            }, 100);
        }

        const client = galleryData[index];
        modalTitle.textContent = `BEAUTIFUL PEOPLE WITH BEAUTIFUL HAIR`;
        modalGallery.innerHTML = '';

        client.images.forEach((image, imgIndex) => {
            const imgContainer = document.createElement('div');
            imgContainer.className = 'modal-image';

            const img = document.createElement('img');
            img.src = `rlycoolhair_pics/${client.folder}/${image}`;
            img.alt = `Client ${index + 1} - Photo ${imgIndex + 1}`;

            // Add click handler to expand image
            img.addEventListener('click', function() {
                openLightbox(img.src);
            });

            imgContainer.appendChild(img);
            modalGallery.appendChild(imgContainer);
        });

        modal.style.display = 'block';
        document.body.classList.add('modal-open');

        // Ensure modal starts at top
        modal.scrollTop = 0;
    }

    function closeModal() {
        modal.style.display = 'none';
        document.body.classList.remove('modal-open');

        // Remove modal scrollbar on mobile
        const modalScrollbar = document.getElementById('modal-fake-scrollbar');
        if (modalScrollbar) {
            modalScrollbar.remove();
        }

        // Restore scroll position
        window.scrollTo(0, savedScrollPosition);
    }

    modalClose.addEventListener('click', closeModal);

    modal.addEventListener('click', function(e) {
        if (e.target === modal) {
            closeModal();
        }
    });

    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            if (lightbox.style.display === 'block') {
                closeLightbox();
            } else if (modal.style.display === 'block') {
                closeModal();
            }
        }
    });

    // Lightbox functions
    function openLightbox(src) {
        lightboxImage.src = src;
        lightbox.style.display = 'block';
    }

    function closeLightbox() {
        lightbox.style.display = 'none';
        lightboxImage.src = '';
    }

    lightboxClose.addEventListener('click', closeLightbox);

    lightbox.addEventListener('click', function(e) {
        if (e.target === lightbox) {
            closeLightbox();
        }
    });
});